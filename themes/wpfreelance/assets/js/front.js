!function(e){var t={init:function(){e("#signup").on("submit",this.submitSignup),e("form.sign-in").on("submit",this.signIn),e(".toggle-menu").on("click",this.toggleMenu),e("#search_type").on("change",this.setSearchUrl),e(".btn-del-noti").on("click",this.delNotify),e("#toggle-msg").on("click",this.setNotifySeen),e(".admin-act button").on("click",this.adminAct);e(".menu-hamburger").click(function(){var t=e(this).closest(".col-nav");t.hasClass("visible")?t.toggleClass("default"):t.toggleClass("visible")}),e(document).on("keyup",".msg_content",function(t){var a=e(t.currentTarget);console.log(e.trim(a.val())),""==!e.trim(a.val())?a.closest("form").addClass("focus"):a.closest("form").removeClass("focus")}),e(".toggle-check").click(function(t){var a=e(this).closest(".block"),s=a.find("ul").css("display");a.find("ul").slideToggle(300),"block"==s?(e(this).removeClass("glyphicon-menu-down cs"),e(this).addClass("glyphicon-menu-right cs ")):(e(this).addClass("glyphicon-menu-down cs"),e(this).removeClass("glyphicon-menu-right cs"))}),e(".btn-adv").click(function(t){e(".search-adv").slideToggle(300)}),e(window).scroll(function(){e(window).scrollTop()>0?e("body").addClass("fixed"):e("body").removeClass("fixed")}),e(document).on("click",".btn-select",function(t){var a=e(t.currentTarget);a.closest(".step ").toggleClass("selected"),a.closest(".step").find(".record-line").removeClass("activate"),a.closest(".record-line").addClass("activate");var s=e("div.activate").length,n=a.attr("id");if(a.hasClass("btn-slect-package"))packages[n].price;s>1&&e("button.btn-submit").removeClass("disable")}),e(document).on("submit","form.frm-main-checkout",function(t){var a=e(t.currentTarget);return window.ajaxSend.checkoutAct(t,"",function(t){t.success?t.popup?(console.log("access popup herer"),e.globalEval(t.scrip_method)):(a.find(".btn-submit").removeClass("loading"),window.location.href=t.redirect_url):alert(t.msg)}),!1})},toggleMenu:function(t){e(t.currentTarget);e(".profile-menu").toggleClass("hide")},signIn:function(e){return window.ajaxSend.Form(e,"bx_login","",function(e){console.log(e),e.success?e.redirect_url?window.location.href=e.redirect_url:window.location.reload(!0):(bx_global.enable_capthca&&grecaptcha.reset(),alert(e.msg))}),!1},submitSignup:function(t){return bx_global.enable_capthca,window.ajaxSend.Form(t,"bx_signup","insert",function(a){e(t.currentTarget).find(".btn-submit").removeClass("loading"),a.success?window.location.href=a.redirect_url:(e("#loginErrorMsg").html(a.msg),e("#loginErrorMsg").removeClass("hide"),bx_global.enable_capthca&&grecaptcha.reset())}),!1},setSearchUrl:function(t){var a=e(t.currentTarget),s=e("option:selected",this).attr("alt");e("form.frm-search").attr("action",a.val()),e("input#keyword").attr("placeholder",s)},setNotifySeen:function(t){var a={id:e(t.currentTarget).attr("rel"),method:"seenall",action:"sync_notify"};return window.ajaxSend.Custom(a,function(e){}),!0},delNotify:function(t){var a=e(t.currentTarget),s={id:a.attr("rel"),method:"delete",action:"sync_notify"};return window.ajaxSend.Custom(s,function(e){a.closest("li").remove()}),!1},adminAct:function(t){var a=e(t.currentTarget),s="off";if(a.hasClass("approve")||a.hasClass("decline")){a.hasClass("approve")&&(s="on");var n=a.attr("value");e.ajax({emulateJSON:!0,method:"post",url:bx_global.ajax_url,data:{action:"sync_profile",request:{ID:n,is_available:s},method:"update_profile_status"},beforeSend:function(e){console.log("bat dau submit job")},success:function(e){e.success?window.location.reload(!0):alert(e.msg)}})}else if(a.hasClass("approveproject")||a.hasClass("archived")){s="archived";a.hasClass("approveproject")&&(s="publish");var o={ID:a.attr("value"),post_status:s};e.ajax({emulateJSON:!0,method:"post",url:bx_global.ajax_url,data:{action:"sync_project",request:o,method:"update_status"},beforeSend:function(e){},success:function(e){e.success?window.location.reload(!0):alert(e.msg)}})}}};e(document).ready(function(){t.init();var a=[],s={keyword:"",from:0,to:1e3,skills:{},post_type:"",cats:{},countries:{},paged:1,href:0},n=[0,1,2.5,5,10,20,50,100,200,1e3];s.keyword=e("#keyword").val(),s.post_type=e("#post_type").val(),e("#range").length&&e("#range").ionRangeSlider({min:0,max:1e5,type:"double",postfix:"K",values:n,onChange:function(e){var t=e.from,a=e.to;s.to=n[a],s.from=n[t],window.ajaxSend.Search(s)}}),e(".search_skill").on("click",function(t){e(t.currentTarget).closest("label").toggleClass("activate");var a=e(this).is(":checked"),n=e(this).val(),o=e(this).attr("alt");a?s.skills[o]=n:delete s.skills[o],s.paged=1,window.ajaxSend.Search(s)}),void 0!==jQuery.fn.chosen&&e(".chosen-select").chosen(),bx_global.is_archive&&e(".chosen-select").on("change",function(t,n){var o=e(this).find("option[value='"+n.selected+"']").attr("alt"),c=e(this).find("option[value='"+n.selected+"']").html();s.skills[o]=n.selected,a.push(s.skills[o]);var i='<span class="full remove-skill"  pos="'+o+'"><span class="skill-title">'+c+'</span> <span><i  class="fa fa-times" aria-hidden="true"></i></span></span>';e("#selected_html").append(i),e("ul.chosen-choices").find(".search-choice").remove(),s.paged=1,window.ajaxSend.Search(s)}),e(document).on("click",".remove-skill",function(t){var n=e(t.currentTarget),o=e(n).attr("pos"),c=s.skills[o];delete s.skills[o];var i=[];e.each(a,function(e,t){t!=c&&i.push(t)}),a=i,e(".chosen-select").val(i).trigger("chosen:updated"),e("ul.chosen-choices").find(".search-choice").remove(),window.ajaxSend.Search(s),e(n).remove()}),e(".search_cat").on("click",function(t){e(t.currentTarget).closest("label").toggleClass("activate");var a=e(this).is(":checked"),n=e(this).val(),o=e(this).attr("alt");a?s.cats[o]=n:delete s.cats[o],s.paged=1,window.ajaxSend.Search(s)}),e(".search_country").on("click",function(t){e(t.currentTarget).closest("label").toggleClass("activate");var a=e(this).is(":checked"),n=e(this).val(),o=e(this).attr("alt");a?s.countries[o]=n:delete s.countries[o],s.paged=1,window.ajaxSend.Search(s)}),e(".pagination1").on("click",function(){return window.ajaxSend.Search(s),!1}),e(document).on("click",".list-project .pagination",function(t){var a=e(t.currentTarget),n=a.html(),o=a.attr("href");return s.paged=n,s.href=o,window.ajaxSend.Search(s),!1})}),e(document).on("click",".port-item",function(t){t.preventDefault(),e(this).ekkoLightbox({wrapping:!1,showArrows:!0})})}(jQuery,window.ajaxSend);